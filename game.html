<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>thIAguinho Engine Pro</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js" crossorigin="anonymous"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/build/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/GLTFLoader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.146.0/examples/js/loaders/DRACOLoader.js"></script>
</head>
<body>

    <video id="input-video" class="hidden-video" playsinline muted autoplay></video>

    <canvas id="camera-canvas"></canvas>

    <canvas id="game-canvas"></canvas>

    <div id="ui-layer">
        
        <div class="hud-top-bar">
            <button class="icon-btn" onclick="Game.togglePause()"><i class='bx bx-slider-alt'></i></button>
            
            <div class="game-info">
                <span id="mode-badge" class="badge">MODE</span>
            </div>

            <div class="score-container">
                <span class="score-label">PONTOS</span>
                <span id="score-val" class="score-number">0</span>
            </div>
        </div>

        <div id="center-message" class="hidden"></div>

        <div id="touch-controls" class="touch-overlay hidden">
            <div class="touch-hint">DESLIZE PARA MOVER</div>
        </div>
        <div id="tap-controls" class="touch-overlay hidden">
            <div class="tap-hint"><i class='bx bxs-hand-up'></i> TOQUE RÁPIDO PARA CORRER</div>
        </div>

    </div>

    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2>CONFIGURAÇÕES</h2>
                <button class="close-btn" onclick="Game.togglePause()"><i class='bx bx-x'></i></button>
            </div>
            
            <div class="settings-body">
                <div class="setting-row">
                    <label>MÉTODO DE CONTROLE</label>
                    <div class="toggle-switch-container">
                        <button class="toggle-btn" id="btn-body" onclick="InputSys.setMode('BODY')">
                            <i class='bx bx-body'></i> CÂMERA
                        </button>
                        <button class="toggle-btn" id="btn-tilt" onclick="InputSys.setMode('TILT')">
                            <i class='bx bx-mobile-vibration'></i> TILT
                        </button>
                        <button class="toggle-btn" id="btn-touch" onclick="InputSys.setMode('TOUCH')">
                            <i class='bx bxs-hand-up'></i> TOUCH
                        </button>
                    </div>
                    <p id="ctrl-desc" class="setting-desc">Use seu corpo na frente da câmera.</p>
                </div>

                <div class="setting-row">
                    <div class="range-header">
                        <label>SENSIBILIDADE</label>
                        <span id="sens-display">1.0</span>
                    </div>
                    <input type="range" min="0.5" max="3.0" step="0.1" value="1.0" class="slider" oninput="InputSys.setSensitivity(this.value)">
                </div>

                <div class="setting-row">
                    <label>DEBUG VISUAL (ESQUELETO)</label>
                    <button class="simple-btn" onclick="Vision.toggleDebug()">LIGAR / DESLIGAR</button>
                </div>
            </div>

            <div class="modal-footer">
                <button class="primary-btn" onclick="Game.togglePause()">CONTINUAR JOGO</button>
                <button class="secondary-btn" onclick="window.location.href='index.html'">SAIR PARA MENU</button>
            </div>
        </div>
    </div>

    <div id="loading-screen" class="modal">
        <div class="loader-spinner"></div>
        <h3 class="loading-title">INICIANDO SISTEMAS...</h3>
        <p id="loading-text">Calibrando Câmera e IA...</p>
    </div>

    <div id="game-over-screen" class="modal hidden">
        <h1 class="game-over-title">FIM DE JOGO</h1>
        <p class="game-over-score">Pontuação Final: <span id="final-score">0</span></p>
        <p class="game-over-record">Recorde: <span id="record-score">0</span></p>
        <button class="primary-btn" onclick="Game.restart()">JOGAR NOVAMENTE</button>
        <button class="secondary-btn" onclick="window.location.href='index.html'" style="margin-top:10px;">MENU PRINCIPAL</button>
    </div>

    <script src="js/vision.js"></script>
    <script src="js/game.js"></script>
</body>
</html>
